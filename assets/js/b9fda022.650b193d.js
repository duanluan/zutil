"use strict";(globalThis.webpackChunkzutil_docs=globalThis.webpackChunkzutil_docs||[]).push([[3133],{2359(e,l,t){t.r(l),t.d(l,{assets:()=>c,contentTitle:()=>d,default:()=>j,frontMatter:()=>r,metadata:()=>s,toc:()=>x});const s=JSON.parse('{"id":"reference-doc/io/compressUtil","title":"CompressUtil \u538b\u7f29\u89e3\u538b\u5de5\u5177\u7c7b","description":"\ud83d\udce6 \u5305\u8def\u5f84: top.csaf.io.CompressUtil","source":"@site/docs/003-reference-doc/io/compressUtil.md","sourceDirName":"003-reference-doc/io","slug":"/reference-doc/io/compressUtil","permalink":"/zutil/docs/reference-doc/io/compressUtil","draft":false,"unlisted":false,"editUrl":"https://github.com/duanluan/zutil/tree/main/docs/docs/003-reference-doc/io/compressUtil.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"IO \u6587\u4ef6\u6d41","permalink":"/zutil/docs/category/io-\u6587\u4ef6\u6d41"},"next":{"title":"FileUtil \u6587\u4ef6\u5de5\u5177\u7c7b","permalink":"/zutil/docs/reference-doc/io/fileUtil"}}');var n=t(5656),i=t(5395);const r={},d="CompressUtil \u538b\u7f29\u89e3\u538b\u5de5\u5177\u7c7b",c={},x=[{value:"\u2728 \u6838\u5fc3\u7279\u6027",id:"-\u6838\u5fc3\u7279\u6027",level:2},{value:"\ud83d\ude80 \u5e38\u7528\u65b9\u6cd5",id:"-\u5e38\u7528\u65b9\u6cd5",level:2},{value:"1. \u538b\u7f29",id:"1-\u538b\u7f29",level:3},{value:"2. \u89e3\u538b",id:"2-\u89e3\u538b",level:3},{value:"3. \u683c\u5f0f\u8bc6\u522b",id:"3-\u683c\u5f0f\u8bc6\u522b",level:3},{value:"\ud83e\uddfe \u652f\u6301\u683c\u5f0f",id:"-\u652f\u6301\u683c\u5f0f",level:2},{value:"\u5f52\u6863\u683c\u5f0f",id:"\u5f52\u6863\u683c\u5f0f",level:3},{value:"\u5355\u6587\u4ef6\u538b\u7f29\u683c\u5f0f",id:"\u5355\u6587\u4ef6\u538b\u7f29\u683c\u5f0f",level:3},{value:"\u2699\ufe0f CompressOptions \u5173\u952e\u914d\u7f6e",id:"\ufe0f-compressoptions-\u5173\u952e\u914d\u7f6e",level:2},{value:"\ud83d\udccc \u5173\u952e\u884c\u4e3a\u8bf4\u660e",id:"-\u5173\u952e\u884c\u4e3a\u8bf4\u660e",level:2},{value:"1. \u8f93\u5165\u4e0e\u76ee\u6807\u89c4\u5219",id:"1-\u8f93\u5165\u4e0e\u76ee\u6807\u89c4\u5219",level:3},{value:"2. \u8986\u76d6\u7b56\u7565 <code>overwrite</code>",id:"2-\u8986\u76d6\u7b56\u7565-overwrite",level:3},{value:"3. \u8def\u5f84\u5b89\u5168\u4e0e\u9650\u989d",id:"3-\u8def\u5f84\u5b89\u5168\u4e0e\u9650\u989d",level:3},{value:"4. \u65f6\u95f4\u6233\u884c\u4e3a",id:"4-\u65f6\u95f4\u6233\u884c\u4e3a",level:3},{value:"5. ZIP \u7f16\u7801\u884c\u4e3a",id:"5-zip-\u7f16\u7801\u884c\u4e3a",level:3},{value:"\ud83e\udde9 RAR \u4e13\u9879\u8bf4\u660e",id:"-rar-\u4e13\u9879\u8bf4\u660e",level:2},{value:"1. RAR \u538b\u7f29\uff08\u5916\u90e8\u547d\u4ee4\uff09",id:"1-rar-\u538b\u7f29\u5916\u90e8\u547d\u4ee4",level:3},{value:"2. RAR \u547d\u4ee4\u53d1\u73b0\u4f18\u5148\u7ea7",id:"2-rar-\u547d\u4ee4\u53d1\u73b0\u4f18\u5148\u7ea7",level:3},{value:"3. RAR \u89e3\u538b\u9650\u5236",id:"3-rar-\u89e3\u538b\u9650\u5236",level:3},{value:"\u26a0\ufe0f \u5f02\u5e38\u8bf4\u660e",id:"\ufe0f-\u5f02\u5e38\u8bf4\u660e",level:2}];function h(e){const l={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.header,{children:(0,n.jsx)(l.h1,{id:"compressutil-\u538b\u7f29\u89e3\u538b\u5de5\u5177\u7c7b",children:"CompressUtil \u538b\u7f29\u89e3\u538b\u5de5\u5177\u7c7b"})}),"\n",(0,n.jsxs)(l.blockquote,{children:["\n",(0,n.jsxs)(l.p,{children:["\ud83d\udce6 ",(0,n.jsx)(l.strong,{children:"\u5305\u8def\u5f84"}),": ",(0,n.jsx)(l.code,{children:"top.csaf.io.CompressUtil"})]}),"\n",(0,n.jsxs)(l.p,{children:["\ud83d\udd17 ",(0,n.jsx)(l.strong,{children:"\u6240\u5c5e\u6a21\u5757"}),": ",(0,n.jsx)(l.code,{children:"zutil-io"})]}),"\n",(0,n.jsxs)(l.p,{children:["\u2699\ufe0f ",(0,n.jsx)(l.strong,{children:"\u914d\u7f6e\u5bf9\u8c61"}),": ",(0,n.jsx)(l.code,{children:"top.csaf.io.CompressOptions"})]}),"\n"]}),"\n",(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.code,{children:"CompressUtil"})," \u63d0\u4f9b\u7edf\u4e00\u7684\u538b\u7f29/\u89e3\u538b\u5165\u53e3\uff0c\u6309\u76ee\u6807\u6216\u6e90\u6587\u4ef6\u540e\u7f00\u81ea\u52a8\u8bc6\u522b\u683c\u5f0f\uff0c\u8986\u76d6 ZIP\u3001TAR \u7cfb\u5217\u30017z\u3001RAR \u4ee5\u53ca GZ/BZ2/XZ \u5355\u6587\u4ef6\u538b\u7f29\u683c\u5f0f\u3002"]}),"\n",(0,n.jsx)(l.p,{children:"\u5b83\u540c\u65f6\u63d0\u4f9b\u5b89\u5168\u89e3\u538b\u80fd\u529b\uff08\u8def\u5f84\u7a7f\u8d8a\u9632\u62a4 + \u89e3\u538b\u9650\u989d\uff09\u3001\u65f6\u95f4\u6233\u4fdd\u7559\u63a7\u5236\u3001\u8f6f\u94fe\u63a5\u904d\u5386\u7b56\u7565\uff0c\u4ee5\u53ca RAR \u5916\u90e8\u547d\u4ee4\u96c6\u6210\u80fd\u529b\u3002"}),"\n",(0,n.jsx)(l.h2,{id:"-\u6838\u5fc3\u7279\u6027",children:"\u2728 \u6838\u5fc3\u7279\u6027"}),"\n",(0,n.jsxs)(l.ul,{children:["\n",(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:"\u7edf\u4e00 API"}),": ",(0,n.jsx)(l.code,{children:"compress(...)"})," \u4e0e ",(0,n.jsx)(l.code,{children:"decompress(...)"})," \u8986\u76d6\u5355\u6e90\u548c\u591a\u6e90\u573a\u666f\u3002"]}),"\n",(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:"\u81ea\u52a8\u683c\u5f0f\u8bc6\u522b"}),": \u901a\u8fc7\u540e\u7f00\u81ea\u52a8\u8bc6\u522b\u683c\u5f0f\uff0c\u4e0d\u9700\u8981\u663e\u5f0f\u4f20 ",(0,n.jsx)(l.code,{children:"Format"}),"\u3002"]}),"\n",(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:"\u5b89\u5168\u89e3\u538b"}),": \u9ed8\u8ba4\u62e6\u622a\u8d8a\u754c\u8def\u5f84\uff08Zip Slip\uff09\u5e76\u652f\u6301\u6761\u76ee\u6570/\u5927\u5c0f\u9650\u989d\u3002"]}),"\n",(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:"\u53ef\u63a7\u8986\u76d6\u7b56\u7565"}),": ",(0,n.jsx)(l.code,{children:"overwrite"})," \u540c\u65f6\u5f71\u54cd\u538b\u7f29\u8f93\u51fa\u4e0e\u89e3\u538b\u843d\u76d8\u884c\u4e3a\u3002"]}),"\n",(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:"\u65f6\u95f4\u6233\u4fdd\u7559"}),": \u652f\u6301\u4fdd\u7559\u6761\u76ee\u6700\u540e\u4fee\u6539\u65f6\u95f4\uff1bGZ \u5934\u65f6\u95f4\u6233\u81ea\u52a8\u505a\u79d2/\u6beb\u79d2\u8f6c\u6362\u3002"]}),"\n",(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:"RAR \u96c6\u6210"}),": \u652f\u6301 RAR \u538b\u7f29\uff08\u8c03\u7528\u5916\u90e8 ",(0,n.jsx)(l.code,{children:"rar"}),"/",(0,n.jsx)(l.code,{children:"winrar"}),"\uff09\u4e0e RAR \u89e3\u538b\uff08junrar\uff09\u3002"]}),"\n"]}),"\n",(0,n.jsx)(l.h2,{id:"-\u5e38\u7528\u65b9\u6cd5",children:"\ud83d\ude80 \u5e38\u7528\u65b9\u6cd5"}),"\n",(0,n.jsx)(l.h3,{id:"1-\u538b\u7f29",children:"1. \u538b\u7f29"}),"\n",(0,n.jsxs)(l.table,{children:[(0,n.jsx)(l.thead,{children:(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.th,{style:{textAlign:"left"},children:"\u65b9\u6cd5"}),(0,n.jsx)(l.th,{style:{textAlign:"left"},children:"\u8bf4\u660e"})]})}),(0,n.jsxs)(l.tbody,{children:[(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"compress(Path source, Path target)"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:"\u538b\u7f29\u5355\u4e2a\u6e90\uff0c\u4f7f\u7528\u9ed8\u8ba4\u9009\u9879"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"compress(Path source, Path target, CompressOptions options)"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:"\u538b\u7f29\u5355\u4e2a\u6e90\uff0c\u81ea\u5b9a\u4e49\u9009\u9879"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"compress(List<Path> sources, Path target)"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:"\u538b\u7f29\u591a\u4e2a\u6e90\uff0c\u4f7f\u7528\u9ed8\u8ba4\u9009\u9879"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"compress(List<Path> sources, Path target, CompressOptions options)"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:"\u538b\u7f29\u591a\u4e2a\u6e90\uff0c\u81ea\u5b9a\u4e49\u9009\u9879"})]})]})]}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-java",children:'Path sourceDir = Paths.get("D:/data/report");\nPath zip = Paths.get("D:/backup/report.zip");\n\nCompressUtil.compress(sourceDir, zip);\n'})}),"\n",(0,n.jsx)(l.h3,{id:"2-\u89e3\u538b",children:"2. \u89e3\u538b"}),"\n",(0,n.jsxs)(l.table,{children:[(0,n.jsx)(l.thead,{children:(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.th,{style:{textAlign:"left"},children:"\u65b9\u6cd5"}),(0,n.jsx)(l.th,{style:{textAlign:"left"},children:"\u8bf4\u660e"})]})}),(0,n.jsxs)(l.tbody,{children:[(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"decompress(Path source, Path targetDir)"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:"\u89e3\u538b\u5230\u76ee\u6807\u76ee\u5f55\uff0c\u4f7f\u7528\u9ed8\u8ba4\u9009\u9879"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"decompress(Path source, Path targetDir, CompressOptions options)"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:"\u89e3\u538b\u5230\u76ee\u6807\u76ee\u5f55\uff0c\u81ea\u5b9a\u4e49\u9009\u9879"})]})]})]}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-java",children:'Path archive = Paths.get("D:/backup/report.zip");\nPath outDir = Paths.get("D:/restore");\n\nCompressUtil.decompress(archive, outDir);\n'})}),"\n",(0,n.jsx)(l.h3,{id:"3-\u683c\u5f0f\u8bc6\u522b",children:"3. \u683c\u5f0f\u8bc6\u522b"}),"\n",(0,n.jsxs)(l.table,{children:[(0,n.jsx)(l.thead,{children:(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.th,{style:{textAlign:"left"},children:"\u65b9\u6cd5"}),(0,n.jsx)(l.th,{style:{textAlign:"left"},children:"\u8bf4\u660e"})]})}),(0,n.jsx)(l.tbody,{children:(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"detectFormat(Path path)"})}),(0,n.jsxs)(l.td,{style:{textAlign:"left"},children:["\u6839\u636e\u6587\u4ef6\u540d\u540e\u7f00\u8bc6\u522b\u683c\u5f0f\uff0c\u65e0\u6cd5\u8bc6\u522b\u8fd4\u56de ",(0,n.jsx)(l.code,{children:"null"})]})]})})]}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-java",children:'CompressUtil.Format format = CompressUtil.detectFormat(Paths.get("a.tar.gz"));\n// -> TAR_GZ\n'})}),"\n",(0,n.jsx)(l.h2,{id:"-\u652f\u6301\u683c\u5f0f",children:"\ud83e\uddfe \u652f\u6301\u683c\u5f0f"}),"\n",(0,n.jsx)(l.h3,{id:"\u5f52\u6863\u683c\u5f0f",children:"\u5f52\u6863\u683c\u5f0f"}),"\n",(0,n.jsxs)(l.table,{children:[(0,n.jsx)(l.thead,{children:(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.th,{style:{textAlign:"left"},children:"\u540e\u7f00"}),(0,n.jsx)(l.th,{style:{textAlign:"center"},children:"\u538b\u7f29"}),(0,n.jsx)(l.th,{style:{textAlign:"center"},children:"\u89e3\u538b"}),(0,n.jsx)(l.th,{style:{textAlign:"left"},children:"\u5907\u6ce8"})]})}),(0,n.jsxs)(l.tbody,{children:[(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"zip"})}),(0,n.jsx)(l.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(l.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsxs)(l.td,{style:{textAlign:"left"},children:["ZIP \u6761\u76ee\u540d\u7f16\u7801\u53d7 ",(0,n.jsx)(l.code,{children:"charset"})," \u5f71\u54cd"]})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"tar"})}),(0,n.jsx)(l.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(l.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:"\u4ec5\u5f52\u6863\u4e0d\u538b\u7f29"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsxs)(l.td,{style:{textAlign:"left"},children:[(0,n.jsx)(l.code,{children:"tar.gz"})," / ",(0,n.jsx)(l.code,{children:"tgz"})]}),(0,n.jsx)(l.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(l.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:"TAR + GZ"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsxs)(l.td,{style:{textAlign:"left"},children:[(0,n.jsx)(l.code,{children:"tar.bz2"})," / ",(0,n.jsx)(l.code,{children:"tbz"})," / ",(0,n.jsx)(l.code,{children:"tbz2"})]}),(0,n.jsx)(l.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(l.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:"TAR + BZ2"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsxs)(l.td,{style:{textAlign:"left"},children:[(0,n.jsx)(l.code,{children:"tar.xz"})," / ",(0,n.jsx)(l.code,{children:"txz"})]}),(0,n.jsx)(l.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(l.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:"TAR + XZ"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"7z"})}),(0,n.jsx)(l.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(l.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:"Apache Commons Compress 7z \u5b9e\u73b0"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"rar"})}),(0,n.jsx)(l.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(l.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:"\u538b\u7f29\u4f9d\u8d56\u5916\u90e8\u547d\u4ee4\uff1b\u89e3\u538b\u7531 junrar \u6267\u884c"})]})]})]}),"\n",(0,n.jsx)(l.h3,{id:"\u5355\u6587\u4ef6\u538b\u7f29\u683c\u5f0f",children:"\u5355\u6587\u4ef6\u538b\u7f29\u683c\u5f0f"}),"\n",(0,n.jsxs)(l.table,{children:[(0,n.jsx)(l.thead,{children:(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.th,{style:{textAlign:"left"},children:"\u540e\u7f00"}),(0,n.jsx)(l.th,{style:{textAlign:"center"},children:"\u538b\u7f29"}),(0,n.jsx)(l.th,{style:{textAlign:"center"},children:"\u89e3\u538b"}),(0,n.jsx)(l.th,{style:{textAlign:"left"},children:"\u5907\u6ce8"})]})}),(0,n.jsxs)(l.tbody,{children:[(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"gz"})}),(0,n.jsx)(l.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(l.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:"\u4ec5\u652f\u6301\u5355\u6587\u4ef6\u8f93\u5165"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"bz2"})}),(0,n.jsx)(l.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(l.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:"\u4ec5\u652f\u6301\u5355\u6587\u4ef6\u8f93\u5165"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"xz"})}),(0,n.jsx)(l.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(l.td,{style:{textAlign:"center"},children:"\u2705"}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:"\u4ec5\u652f\u6301\u5355\u6587\u4ef6\u8f93\u5165"})]})]})]}),"\n",(0,n.jsxs)(l.blockquote,{children:["\n",(0,n.jsxs)(l.p,{children:["\u540e\u7f00\u8bc6\u522b\u987a\u5e8f\u4f1a\u4f18\u5148\u5339\u914d\u590d\u5408\u540e\u7f00\uff08\u5982 ",(0,n.jsx)(l.code,{children:"tar.gz"}),"\u3001",(0,n.jsx)(l.code,{children:"tar.bz2"}),"\u3001",(0,n.jsx)(l.code,{children:"tar.xz"}),"\uff09\uff0c\u518d\u5339\u914d ",(0,n.jsx)(l.code,{children:"gz"}),"/",(0,n.jsx)(l.code,{children:"bz2"}),"/",(0,n.jsx)(l.code,{children:"xz"}),"\u3002"]}),"\n"]}),"\n",(0,n.jsx)(l.h2,{id:"\ufe0f-compressoptions-\u5173\u952e\u914d\u7f6e",children:"\u2699\ufe0f CompressOptions \u5173\u952e\u914d\u7f6e"}),"\n",(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.code,{children:"CompressOptions"})," \u662f ",(0,n.jsx)(l.code,{children:"CompressUtil"})," \u7684\u7edf\u4e00\u914d\u7f6e\u5165\u53e3\u3002"]}),"\n",(0,n.jsxs)(l.table,{children:[(0,n.jsx)(l.thead,{children:(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.th,{style:{textAlign:"left"},children:"\u914d\u7f6e\u9879"}),(0,n.jsx)(l.th,{style:{textAlign:"left"},children:"\u9ed8\u8ba4\u503c"}),(0,n.jsx)(l.th,{style:{textAlign:"left"},children:"\u4f5c\u7528"})]})}),(0,n.jsxs)(l.tbody,{children:[(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"bufferSize"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"64 * 1024"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:"\u6d41\u590d\u5236\u7f13\u51b2\u533a\u5927\u5c0f"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"charset"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"UTF-8"})}),(0,n.jsxs)(l.td,{style:{textAlign:"left"},children:["ZIP \u6761\u76ee\u540d\u7f16\u7801\uff1b\u4e3a ",(0,n.jsx)(l.code,{children:"null"})," \u65f6\u81ea\u52a8\u56de\u9000 ",(0,n.jsx)(l.code,{children:"UTF-8"})]})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"compressionLevel"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"Deflater.BEST_SPEED"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:"\u538b\u7f29\u7b49\u7ea7\uff1b\u5185\u90e8\u4f1a\u5f52\u4e00\u5316\u5230\u5408\u6cd5\u533a\u95f4"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"overwrite"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"true"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:"\u76ee\u6807\u5df2\u5b58\u5728\u65f6\u662f\u5426\u8986\u76d6\uff08\u538b\u7f29\u4e0e\u89e3\u538b\u90fd\u751f\u6548\uff09"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"includeRootDir"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"true"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:"\u538b\u7f29\u76ee\u5f55\u65f6\u662f\u5426\u5305\u542b\u6839\u76ee\u5f55\u672c\u8eab"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"preserveLastModified"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"true"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:"\u662f\u5426\u4fdd\u7559\u6700\u540e\u4fee\u6539\u65f6\u95f4"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"followLinks"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"false"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:"\u538b\u7f29\u904d\u5386\u65f6\u662f\u5426\u8ddf\u968f\u8f6f\u94fe\u63a5"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"allowUnsafePath"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"false"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:"\u89e3\u538b\u65f6\u662f\u5426\u5141\u8bb8\u8d8a\u754c\u8def\u5f84"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"maxEntries"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"0"})}),(0,n.jsxs)(l.td,{style:{textAlign:"left"},children:["\u6700\u5927\u89e3\u538b\u6761\u76ee\u6570\uff0c",(0,n.jsx)(l.code,{children:"0"})," \u8868\u793a\u4e0d\u9650"]})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"maxTotalSize"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"0"})}),(0,n.jsxs)(l.td,{style:{textAlign:"left"},children:["\u6700\u5927\u89e3\u538b\u603b\u5b57\u8282\u6570\uff0c",(0,n.jsx)(l.code,{children:"0"})," \u8868\u793a\u4e0d\u9650"]})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"maxEntrySize"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"0"})}),(0,n.jsxs)(l.td,{style:{textAlign:"left"},children:["\u5355\u6761\u76ee\u6700\u5927\u89e3\u538b\u5b57\u8282\u6570\uff0c",(0,n.jsx)(l.code,{children:"0"})," \u8868\u793a\u4e0d\u9650"]})]})]})]}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-java",children:"CompressOptions options = CompressOptions.builder()\n    .overwrite(false)\n    .includeRootDir(false)\n    .preserveLastModified(true)\n    .maxEntries(1000)\n    .maxTotalSize(500L * 1024 * 1024) // 500 MB\n    .maxEntrySize(100L * 1024 * 1024) // 100 MB\n    .build();\n"})}),"\n",(0,n.jsx)(l.h2,{id:"-\u5173\u952e\u884c\u4e3a\u8bf4\u660e",children:"\ud83d\udccc \u5173\u952e\u884c\u4e3a\u8bf4\u660e"}),"\n",(0,n.jsx)(l.h3,{id:"1-\u8f93\u5165\u4e0e\u76ee\u6807\u89c4\u5219",children:"1. \u8f93\u5165\u4e0e\u76ee\u6807\u89c4\u5219"}),"\n",(0,n.jsxs)(l.ul,{children:["\n",(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.code,{children:"compress(List<Path>, ...)"})," \u4f20\u5165\u7a7a\u5217\u8868\u4f1a\u629b\u51fa ",(0,n.jsx)(l.code,{children:"IllegalArgumentException"}),"\u3002"]}),"\n",(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.code,{children:"gz"}),"/",(0,n.jsx)(l.code,{children:"bz2"}),"/",(0,n.jsx)(l.code,{children:"xz"})," \u538b\u7f29\u4ec5\u5141\u8bb8\u5355\u4e2a\u6e90\u6587\u4ef6\uff1b\u4f20\u76ee\u5f55\u6216\u591a\u4e2a\u6e90\u4f1a\u629b\u51fa\u5f02\u5e38\u3002"]}),"\n",(0,n.jsx)(l.li,{children:"\u538b\u7f29\u524d\u4f1a\u81ea\u52a8\u521b\u5efa\u76ee\u6807\u7236\u76ee\u5f55\u3002"}),"\n",(0,n.jsx)(l.li,{children:"\u89e3\u538b\u524d\u4f1a\u81ea\u52a8\u521b\u5efa\u76ee\u6807\u76ee\u5f55\u3002"}),"\n"]}),"\n",(0,n.jsxs)(l.h3,{id:"2-\u8986\u76d6\u7b56\u7565-overwrite",children:["2. \u8986\u76d6\u7b56\u7565 ",(0,n.jsx)(l.code,{children:"overwrite"})]}),"\n",(0,n.jsxs)(l.ul,{children:["\n",(0,n.jsxs)(l.li,{children:["\u538b\u7f29\uff1a\u76ee\u6807\u6587\u4ef6\u5b58\u5728\u4e14 ",(0,n.jsx)(l.code,{children:"overwrite=false"})," \u65f6\u76f4\u63a5\u5931\u8d25\u3002"]}),"\n",(0,n.jsxs)(l.li,{children:["\u89e3\u538b\uff1a\u82e5\u6761\u76ee\u843d\u76d8\u8def\u5f84\u5df2\u5b58\u5728\u4e14 ",(0,n.jsx)(l.code,{children:"overwrite=false"}),"\uff0c\u4f1a\u56e0 ",(0,n.jsx)(l.code,{children:"CREATE_NEW"})," \u5931\u8d25\u800c\u629b\u5f02\u5e38\u3002"]}),"\n"]}),"\n",(0,n.jsx)(l.h3,{id:"3-\u8def\u5f84\u5b89\u5168\u4e0e\u9650\u989d",children:"3. \u8def\u5f84\u5b89\u5168\u4e0e\u9650\u989d"}),"\n",(0,n.jsxs)(l.ul,{children:["\n",(0,n.jsxs)(l.li,{children:["\u9ed8\u8ba4 ",(0,n.jsx)(l.code,{children:"allowUnsafePath=false"}),"\uff0c\u4f1a\u62d2\u7edd ",(0,n.jsx)(l.code,{children:"../../x"})," \u7b49\u8d8a\u754c\u6761\u76ee\u3002"]}),"\n",(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.code,{children:"maxEntries"}),"\u3001",(0,n.jsx)(l.code,{children:"maxTotalSize"}),"\u3001",(0,n.jsx)(l.code,{children:"maxEntrySize"})," \u4efb\u4e00\u5927\u4e8e 0 \u65f6\u542f\u7528\u9650\u989d\u8ddf\u8e2a\u3002"]}),"\n",(0,n.jsxs)(l.li,{children:["\u8d85\u9650\u4f1a\u629b\u51fa ",(0,n.jsx)(l.code,{children:"IllegalArgumentException"}),"\uff0c\u7528\u4e8e\u9632\u5fa1\u5f02\u5e38\u81a8\u80c0\u5305\uff08\u5982 Zip Bomb\uff09\u3002"]}),"\n"]}),"\n",(0,n.jsx)(l.h3,{id:"4-\u65f6\u95f4\u6233\u884c\u4e3a",children:"4. \u65f6\u95f4\u6233\u884c\u4e3a"}),"\n",(0,n.jsxs)(l.ul,{children:["\n",(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.code,{children:"preserveLastModified=true"})," \u65f6\uff0c\u5c3d\u53ef\u80fd\u8fd8\u539f\u6761\u76ee\u4fee\u6539\u65f6\u95f4\u3002"]}),"\n",(0,n.jsx)(l.li,{children:"GZ \u6587\u4ef6\u5934\u4e2d\u7684\u65f6\u95f4\u6233\u4e3a\u79d2\uff0c\u5185\u90e8\u4f1a\u8f6c\u6362\u4e3a\u6beb\u79d2\u5199\u56de\u6587\u4ef6\u7cfb\u7edf\u3002"}),"\n"]}),"\n",(0,n.jsx)(l.h3,{id:"5-zip-\u7f16\u7801\u884c\u4e3a",children:"5. ZIP \u7f16\u7801\u884c\u4e3a"}),"\n",(0,n.jsxs)(l.ul,{children:["\n",(0,n.jsxs)(l.li,{children:["ZIP \u538b\u7f29/\u89e3\u538b\u90fd\u4f1a\u4f7f\u7528 ",(0,n.jsx)(l.code,{children:"charset"}),"\u3002"]}),"\n",(0,n.jsxs)(l.li,{children:["\u5f53 ",(0,n.jsx)(l.code,{children:"charset == null"})," \u65f6\uff0c\u5185\u90e8\u81ea\u52a8\u56de\u9000\u4e3a ",(0,n.jsx)(l.code,{children:"UTF-8"}),"\uff0c\u907f\u514d\u7a7a\u6307\u9488\u95ee\u9898\u3002"]}),"\n"]}),"\n",(0,n.jsx)(l.h2,{id:"-rar-\u4e13\u9879\u8bf4\u660e",children:"\ud83e\udde9 RAR \u4e13\u9879\u8bf4\u660e"}),"\n",(0,n.jsx)(l.h3,{id:"1-rar-\u538b\u7f29\u5916\u90e8\u547d\u4ee4",children:"1. RAR \u538b\u7f29\uff08\u5916\u90e8\u547d\u4ee4\uff09"}),"\n",(0,n.jsx)(l.p,{children:"RAR \u538b\u7f29\u901a\u8fc7\u5916\u90e8\u8fdb\u7a0b\u6267\u884c\u547d\u4ee4\uff1a"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-text",children:"rar a -r -idq <target> *\n"})}),"\n",(0,n.jsx)(l.p,{children:"\u5b9e\u73b0\u8981\u70b9\uff1a"}),"\n",(0,n.jsxs)(l.ul,{children:["\n",(0,n.jsx)(l.li,{children:"\u5148\u5c06\u6e90\u6587\u4ef6\u6309\u5f52\u6863\u7ed3\u6784\u590d\u5236\u5230\u4e34\u65f6\u76ee\u5f55\uff0c\u518d\u5728\u4e34\u65f6\u76ee\u5f55\u6267\u884c\u547d\u4ee4\u3002"}),"\n",(0,n.jsxs)(l.li,{children:["\u8fdb\u7a0b\u8d85\u65f6\u65f6\u95f4\u4e3a ",(0,n.jsx)(l.code,{children:"300"})," \u79d2\u3002"]}),"\n",(0,n.jsx)(l.li,{children:"\u6267\u884c\u5931\u8d25\u65f6\u4f1a\u643a\u5e26\u9000\u51fa\u7801\u4e0e\u547d\u4ee4\u8f93\u51fa\u3002"}),"\n",(0,n.jsxs)(l.li,{children:["\u4e34\u65f6\u76ee\u5f55\u4f1a\u5728 ",(0,n.jsx)(l.code,{children:"finally"})," \u4e2d\u6e05\u7406\u3002"]}),"\n"]}),"\n",(0,n.jsx)(l.h3,{id:"2-rar-\u547d\u4ee4\u53d1\u73b0\u4f18\u5148\u7ea7",children:"2. RAR \u547d\u4ee4\u53d1\u73b0\u4f18\u5148\u7ea7"}),"\n",(0,n.jsxs)(l.ol,{children:["\n",(0,n.jsxs)(l.li,{children:["JVM \u7cfb\u7edf\u5c5e\u6027\uff1a",(0,n.jsx)(l.code,{children:"zutil.rar.command"})]}),"\n",(0,n.jsxs)(l.li,{children:["\u73af\u5883\u53d8\u91cf\uff1a",(0,n.jsx)(l.code,{children:"ZUTIL_RAR_COMMAND"})]}),"\n",(0,n.jsxs)(l.li,{children:["\u5185\u7f6e\u5019\u9009\uff1a",(0,n.jsx)(l.code,{children:"rar"}),"\u3001",(0,n.jsx)(l.code,{children:"winrar"})," \u53ca\u5e38\u89c1\u5b89\u88c5\u8def\u5f84\uff08Windows/Linux\uff09"]}),"\n"]}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-java",children:'System.setProperty("zutil.rar.command", "C:\\\\Program Files\\\\WinRAR\\\\rar.exe");\nCompressUtil.compress(Paths.get("D:/data"), Paths.get("D:/backup/data.rar"));\n'})}),"\n",(0,n.jsx)(l.h3,{id:"3-rar-\u89e3\u538b\u9650\u5236",children:"3. RAR \u89e3\u538b\u9650\u5236"}),"\n",(0,n.jsxs)(l.ul,{children:["\n",(0,n.jsx)(l.li,{children:"RAR \u89e3\u538b\u7531 junrar \u6267\u884c\u3002"}),"\n",(0,n.jsxs)(l.li,{children:["\u82e5\u9047\u5230 RAR5\uff08",(0,n.jsx)(l.code,{children:"UnsupportedRarV5Exception"}),"\uff09\u4f1a\u629b\u51fa\u660e\u786e\u9519\u8bef\uff0c\u63d0\u793a\u6539\u7528\u5916\u90e8 ",(0,n.jsx)(l.code,{children:"unrar/winrar"})," \u89e3\u538b\u3002"]}),"\n"]}),"\n",(0,n.jsx)(l.h2,{id:"\ufe0f-\u5f02\u5e38\u8bf4\u660e",children:"\u26a0\ufe0f \u5f02\u5e38\u8bf4\u660e"}),"\n",(0,n.jsx)(l.p,{children:"\u5e38\u89c1\u5f02\u5e38\u573a\u666f\uff1a"}),"\n",(0,n.jsxs)(l.table,{children:[(0,n.jsx)(l.thead,{children:(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.th,{style:{textAlign:"left"},children:"\u5f02\u5e38\u7c7b\u578b"}),(0,n.jsx)(l.th,{style:{textAlign:"left"},children:"\u5e38\u89c1\u89e6\u53d1\u573a\u666f"})]})}),(0,n.jsxs)(l.tbody,{children:[(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"IllegalArgumentException"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:"\u6e90\u8def\u5f84\u4e0d\u5b58\u5728\u3001\u683c\u5f0f\u4e0d\u652f\u6301\u3001\u5355\u6587\u4ef6\u683c\u5f0f\u4f20\u5165\u76ee\u5f55/\u591a\u6e90\u3001\u6761\u76ee\u8d8a\u754c\u3001\u89e3\u538b\u8d85\u9650\u3001\u76ee\u6807\u5df2\u5b58\u5728\u4f46\u7981\u6b62\u8986\u76d6"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{style:{textAlign:"left"},children:(0,n.jsx)(l.code,{children:"RuntimeException"})}),(0,n.jsx)(l.td,{style:{textAlign:"left"},children:"\u5e95\u5c42 IO/\u538b\u7f29\u5e93\u9519\u8bef\u3001\u5916\u90e8 RAR \u547d\u4ee4\u5931\u8d25\u6216\u8d85\u65f6\u3001RAR \u547d\u4ee4\u4e0d\u53ef\u7528\u3001RAR5 \u89e3\u538b\u4e0d\u652f\u6301"})]})]})]})]})}function j(e={}){const{wrapper:l}={...(0,i.R)(),...e.components};return l?(0,n.jsx)(l,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},5395(e,l,t){t.d(l,{R:()=>r,x:()=>d});var s=t(7140);const n={},i=s.createContext(n);function r(e){const l=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(l):{...l,...e}},[l,e])}function d(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),s.createElement(i.Provider,{value:l},e.children)}}}]);