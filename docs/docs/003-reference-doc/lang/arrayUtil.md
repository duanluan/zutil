# ArrayUtil æ•°ç»„å·¥å…·ç±»

> ðŸ“¦ **åŒ…è·¯å¾„**ï¼š`top.csaf.lang.ArrayUtil`
>
> ðŸ”— **æ‰€å±žæ¨¡å—**ï¼š`zutil-core`

**ArrayUtil** æ˜¯åœ¨ `org.apache.commons.lang3.ArrayUtils` åŸºç¡€ä¸Šçš„æ‰©å±•ã€‚
è¿™æ„å‘³ç€é™¤äº†å¯ä»¥ä½¿ç”¨ Apache Commons æä¾›çš„æ‰€æœ‰æ ‡å‡†æ•°ç»„æ“ä½œï¼ˆå¦‚ `isEmpty`, `add`, `contains`, `reverse` ç­‰ï¼‰å¤–ï¼Œè¿˜é¢å¤–æä¾›äº†ä¸€ç³»åˆ—å¢žå¼ºåŠŸèƒ½ï¼Œé‡ç‚¹è§£å†³äº†**å­—ç¬¦é›†è½¬æ¢**ã€**æ•°ç»„åŽ»é‡**ã€**ä½ç§»å¡«å……**ç­‰åœºæ™¯ç—›ç‚¹ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

* **å®Œå…¨å…¼å®¹**ï¼šç»§æ‰¿è‡ª Commons Lang3ï¼Œæ— ç¼å…¼å®¹çŽ°æœ‰ä»£ç ã€‚
* **å…¨ç±»åž‹æ”¯æŒ**ï¼šæ‰€æœ‰æ–¹æ³•å‡é‡è½½æ”¯æŒ Java çš„ 8 ç§åŸºæœ¬æ•°æ®ç±»åž‹ (`int`, `long`, `byte`, `char`, `double`, `float`, `short`, `boolean`) åŠå…¶åŒ…è£…ç±»ã€‚
* **ç¼–ç è½¬æ¢**ï¼šæä¾› `char[]`ã€`byte[]`ã€`String` ä¹‹é—´åŸºäºŽ `Charset` çš„ä¾¿æ·äº’è½¬ã€‚
* **é«˜çº§åŽ»é‡**ï¼šæä¾›ä¿ç•™é¦–ä½ã€ä¿ç•™æœ«ä½ã€å€’åºåŽ»é‡ã€Hash åŽ»é‡ç­‰å¤šç§ç­–ç•¥ã€‚
* **æ™ºèƒ½å¡«å……**ï¼šå¢žå¼ºç‰ˆ `fill`ï¼Œæ”¯æŒè‡ªåŠ¨æ‰©å®¹ï¼ˆè¶…å‡ºé•¿åº¦è‡ªåŠ¨åˆ›å»ºæ–°æ•°ç»„ï¼Œæœªè¶…å‡ºåˆ™åŽŸåœ°ä¿®æ”¹ï¼‰ã€‚
* **ç‰¹æ®Šä½ç§»**ï¼šæ”¯æŒæ•°ç»„å…ƒç´ çš„å‘å‰ä½ç§»ï¼ˆåˆ é™¤åŒºé—´å¹¶å·¦ç§»ï¼‰ä¸Žå®šé•¿åˆ é™¤ã€‚

## ðŸš€ å¸¸ç”¨æ–¹æ³•æ¦‚è§ˆ

### 1. ç¼–ç ä¸Žç±»åž‹è½¬æ¢ (Conversion)

ç®€åŒ–äº†å­—ç¬¦æ•°ç»„ã€å­—èŠ‚æ•°ç»„ä¸Žå­—ç¬¦ä¸²ä¹‹é—´çš„è½¬æ¢ï¼Œæ”¯æŒæŒ‡å®šå­—ç¬¦é›†ï¼ˆé»˜è®¤ UTF-8ï¼‰ã€‚

| æ–¹æ³•å                           | æè¿°        | ç¤ºä¾‹                        |
|:------------------------------|:----------|:--------------------------|
| `toBytes(char[], [Charset])`  | å­—ç¬¦æ•°ç»„è½¬å­—èŠ‚æ•°ç»„ | `['a','b']` -> `[97, 98]` |
| `toChars(byte[], [Charset])`  | å­—èŠ‚æ•°ç»„è½¬å­—ç¬¦æ•°ç»„ | `[97, 98]` -> `['a','b']` |
| `toString(byte[], [Charset])` | å­—èŠ‚æ•°ç»„è½¬å­—ç¬¦ä¸²  | `[97, 98]` -> `"ab"`      |

**ç¤ºä¾‹ä»£ç **:

```java
char[] chars = {'H', 'e', 'l', 'l', 'o'};

// è½¬ä¸º UTF-8 å­—èŠ‚æ•°ç»„
byte[] bytes = ArrayUtil.toBytes(chars);

// æŒ‡å®šå­—ç¬¦é›†è½¬æ¢ (æ”¯æŒ String æˆ– Charset å¯¹è±¡)
byte[] gbkBytes = ArrayUtil.toBytes(chars, "GBK");

// è¿˜åŽŸ
String str = ArrayUtil.toString(bytes); // -> "Hello"
```

### 2. æ•°ç»„åŽ»é‡ (Deduplication)

æä¾›å¤šç§åŽ»é‡ç®—æ³•ï¼Œä»¥æ»¡è¶³å¯¹ç»“æžœé¡ºåºçš„ä¸åŒéœ€æ±‚ã€‚æ‰€æœ‰åŽ»é‡æ–¹æ³•å‡**è¿”å›žæ–°æ•°ç»„**ã€‚

| æ–¹æ³•å                    | æè¿°                                      | ç»“æžœç¤ºä¾‹ (`[A, B, A]`) |
|:-----------------------|:----------------------------------------|:-------------------|
| `deduplicate`          | **ä¿ç•™é¦–ä½**ã€‚ä¿ç•™ç¬¬ä¸€ä¸ªå‡ºçŽ°çš„å…ƒç´ ï¼ŒåŽç»­é‡å¤çš„åˆ é™¤ã€‚            | `[A, B]`           |
| `deduplicatePreceding` | **ä¿ç•™æœ«ä½**ã€‚ä¿ç•™æœ€åŽä¸€æ¬¡å‡ºçŽ°çš„å…ƒç´ ã€‚                   | `[B, A]`           |
| `deduplicateReverse`   | **å€’åºåŽ»é‡**ã€‚åŽ»é‡åŽæŒ‰è‡ªç„¶é¡ºåºå€’åºæŽ’åˆ— (TreeSet)ã€‚        | `[B, A]` (è‹¥B>A)    |
| `deduplicateHashSort`  | **HashåŽ»é‡**ã€‚åŸºäºŽ HashMap åŽ»é‡ï¼Œé¡ºåºå–å†³äºŽ Hash åˆ†å¸ƒã€‚ | (æ— åº)               |

**ç¤ºä¾‹ä»£ç **:

```java
Integer[] nums = {1, 2, 3, 1, 2};

// 1. æ™®é€šåŽ»é‡ (ä¿ç•™å‰)
Integer[] res1 = ArrayUtil.deduplicate(nums);
// -> [1, 2, 3]

// 2. ä¿ç•™åŽåŽ»é‡ (ç‰¹å®šåœºæ™¯ä¸‹éœ€è¦ä¿ç•™æœ€æ–°æ•°æ®çš„å¼•ç”¨)
Integer[] res2 = ArrayUtil.deduplicatePreceding(nums);
// -> [3, 1, 2]

// 3. å€’åºåŽ»é‡ (åˆ©ç”¨ TreeSet)
Integer[] res3 = ArrayUtil.deduplicateReverse(nums);
// -> [3, 2, 1]
```

### 3. æ•°ç»„æ“ä½œä¸Žå¡«å…… (Manipulation)

#### 3.1 æ™ºèƒ½å¡«å…… (Auto-Expanding Fill)
æ ‡å‡†çš„ `Arrays.fill` å¦‚æžœç´¢å¼•è¶Šç•Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè€Œ `ArrayUtil.fill` æ”¯æŒè‡ªåŠ¨æ‰©å®¹ã€‚

| æ–¹æ³•å                                      | æè¿°                                                             |
|:-----------------------------------------|:---------------------------------------------------------------|
| `fill(array, fromIndex, toIndex, value)` | å¡«å……æ•°ç»„ã€‚**æ³¨æ„è¿”å›žå€¼**ï¼šè‹¥ `toIndex` è¶…å‡ºåŽŸé•¿åº¦ï¼Œè¿”å›ž**æ–°æ•°ç»„**ï¼›è‹¥æœªè¶…å‡ºï¼Œåˆ™**ä¿®æ”¹åŽŸæ•°ç»„**å¹¶è¿”å›žã€‚ |

```java
int[] arr = {1, 2};

// åœºæ™¯1ï¼šæ‰©å®¹å¡«å…… (èŒƒå›´ 2~4 è¶…å‡ºåŽŸé•¿åº¦ 2)
// è¿”å›žæ–°æ•°ç»„ [1, 2, 9, 9]
int[] newArr = ArrayUtil.fill(arr, 2, 4, 9);

// åœºæ™¯2ï¼šåŽŸåœ°å¡«å…… (èŒƒå›´ 0~1 åœ¨åŽŸé•¿åº¦å†…)
// ä¿®æ”¹åŽŸæ•°ç»„ä¸º [9, 2] å¹¶è¿”å›ž
ArrayUtil.fill(arr, 0, 1, 9);
```

#### 3.2 å®šé•¿åˆ é™¤ (Remove & Keep Length)
ç”¨äºŽ**ä¿æŒæ•°ç»„é•¿åº¦ä¸å˜**çš„åœºæ™¯ï¼šåˆ é™¤æŒ‡å®šä½ç½®å…ƒç´ ï¼ŒåŽç»­å…ƒç´ å‰ç§»ï¼Œå¹¶å°†**æŒ‡å®šçš„å€¼**å¡«å……åˆ°æ•°ç»„æœ€åŽä¸€ä½ã€‚æ­¤æ–¹æ³•å§‹ç»ˆè¿”å›ž**æ–°æ•°ç»„**ã€‚

| æ–¹æ³•å                                      | æè¿°                                       |
|:-----------------------------------------|:-----------------------------------------|
| `remove(array, index, lastElementValue)` | åˆ é™¤æŒ‡å®šç´¢å¼•å…ƒç´ ï¼Œå·¦ç§»åŽç»­å…ƒç´ ï¼Œæœ«å°¾å¡«å…… `lastElementValue`ã€‚ |

```java
String[] arr = {"A", "B", "C", "D"};

// åˆ é™¤ç´¢å¼• 1 ("B")ï¼ŒåŽç»­å…ƒç´  ("C","D") å‰ç§»ï¼Œæœ«å°¾å¡«å…… "End"
String[] res = ArrayUtil.remove(arr, 1, "End");
// -> ["A", "C", "D", "End"]
```

#### 3.3 åŒºé—´å‰ç§» (Move Forward)
å°†æ•°ç»„ä¸­æŒ‡å®šåŒºé—´çš„æ•°æ®åˆ é™¤ï¼Œå¹¶å°†åŽé¢çš„æ•°æ®å‘å‰ç§»åŠ¨ã€‚**æ•°ç»„é•¿åº¦ä¿æŒä¸å˜**ï¼Œæœ«å°¾å¤šå‡ºçš„ä½ç½®å°†è¢«é‡ç½®ä¸ºé»˜è®¤å€¼ï¼ˆ0, false, null ç­‰ï¼‰ã€‚

| æ–¹æ³•å                                      | æè¿°                                     |
|:-----------------------------------------|:---------------------------------------|
| `moveForward(array, startIndex, length)` | åˆ é™¤ `startIndex` èµ·å§‹çš„ `length` ä¸ªå…ƒç´ ï¼ŒåŽç»­å‰ç§»ã€‚ |

```java
int[] arr = {10, 20, 30, 40, 50};

// ä»Žä¸‹æ ‡ 1 å¼€å§‹ï¼Œ"åƒæŽ‰" 2 ä¸ªé•¿åº¦ (å³åˆ é™¤ 20, 30)
// å°† 40, 50 å‰ç§»ï¼Œæœ«å°¾è¡¥ 0
int[] res = ArrayUtil.moveForward(arr, 1, 2);
// -> [10, 40, 50, 0, 0]
```

#### 3.4 ç§»é™¤æŒ‡å®šå…ƒç´  (Remove Elements)
æ ¹æ®å‚æ•°åˆ—è¡¨ç§»é™¤æ•°ç»„ä¸­çš„å…ƒç´ ã€‚**æ³¨æ„**ï¼šæ­¤æ–¹æ³•ç§»é™¤çš„æ˜¯â€œå‚æ•°ä¸­æŒ‡å®šçš„æ¬¡æ•°â€ï¼Œè€Œéžç§»é™¤æ‰€æœ‰é‡å¤é¡¹ã€‚

| æ–¹æ³•å                                   | æè¿°                                  |
|:--------------------------------------|:------------------------------------|
| `removeAllElements(array, values...)` | åˆ é™¤æ•°ç»„ä¸­ä¸Ž `values` åŒ¹é…çš„å…ƒç´ ï¼ˆæ¯ä¸ªå‚æ•°ç§»é™¤ä¸€ä¸ªåŒ¹é…é¡¹ï¼‰ã€‚ |

```java
int[] arr = {1, 0, 2, 0, 3, 5};

// åˆ é™¤ä¸€ä¸ª 0 å’Œä¸€ä¸ª 5
int[] res = ArrayUtil.removeAllElements(arr, 0, 5);
// -> [1, 2, 0, 3] (æ³¨æ„ï¼šæ•°ç»„ä¸­ç¬¬äºŒä¸ª 0 è¢«ä¿ç•™äº†)
```

### 4. æŸ¥æ‰¾ä¸Žç»Ÿè®¡ (Search & Stat)

| æ–¹æ³•å                                                   | æè¿°                                      |
|:------------------------------------------------------|:----------------------------------------|
| `indexOf(char[] array, String str, [int startIndex])` | åœ¨å­—ç¬¦æ•°ç»„ä¸­æŸ¥æ‰¾**å­—ç¬¦ä¸²**å‡ºçŽ°çš„ä½ç½®ã€‚é’ˆå¯¹ 2 å­—ç¬¦çš„æŸ¥æ‰¾è¿›è¡Œäº†æ€§èƒ½ä¼˜åŒ–ã€‚ |
| `allLength(String... strs)`                           | è®¡ç®—å¤šä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦æ€»å’Œã€‚                           |

```java
char[] buffer = {'H', 'e', 'l', 'l', 'o'};

// åœ¨å­—ç¬¦æ•°ç»„ä¸­æŸ¥æ‰¾å­ä¸² "ll"
int index = ArrayUtil.indexOf(buffer, "ll"); 
// -> 2

// ç»Ÿè®¡é•¿åº¦
int len = ArrayUtil.allLength("Hello", "World");
// -> 10
```
